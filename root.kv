#:kivy 2.0
#:import Factory kivy.factory.Factory

<RootLayout>:
    box: box
    orientation: 'vertical'
    BoxLayout:
        size_hint_y: 0.1
        Label:
            text: "Time tracker"
            size_hint_x: 0.7
        BoxLayout:
            size_hint_x: 0.3
            padding: 15, 15
            Button:
                id: menu_btn
                background_normal: ''
                background_color: 0, 0, 0, 1
                on_release: Factory.MenuPopup().open()
                Image:
                    source: 'icons/menu.png'
                    size: menu_btn.size
                    pos: menu_btn.pos

    ScrollView:
        GridLayout:
            id: box
            cols: 1
            size_hint_y: None
            height: 0

    BoxLayout:
        size_hint_y: 0.1
        padding: '5dp', '5dp'
        TextInput:
            size_hint_x: 0.75
            padding: 0, 12
            id: tracker_name_input
            multiline: False
            background_active: ''
            background_color: 0, 0, 0, 1
            background_disabled_normal: ''
            background_normal: ''
            font_size: 15
            foreground_color: 1, 1, 1, 1
            hint_text: 'Tracker name...'
        Button:
            id: add_btn
            background_normal: ''
            background_color: 0, 0, 0, 1
            size_hint_x: 0.25
            on_press: app.create_new_tracker(tracker_name_input.text)
            Image:
                source: 'icons/plus.png'
                size: add_btn.size
                pos: add_btn.pos


<TrackerContainer>:
    img: img
    height: 100
    size_hint: 1, None
    padding: '5dp', '5dp'
    BoxLayout:
        orientation: 'vertical'
        BoxLayout:
            size_hint_y: 0.5
            BoxLayout:
                size_hint: 0.35, None
                size: 40, 40
                padding: 9, 12
                Button:
                    id: reset_button
                    background_normal: ''
                    background_color: 0, 0, 0, 1
                    on_release: app.reset_tracker_time(root.ID)
                    Image:
                        id: r_img
                        source: 'icons/refresh.png'
                        size: reset_button.size
                        pos: reset_button.pos
            Button:
                id: play_button
                background_normal: ''
                size_hint_x: 0.3
                background_color: 0, 0, 0, 1
                on_press: app.start_stop_timer(root.ID)
                Image:
                    id: img
                    source: 'icons/play-button.png'
                    size: play_button.size
                    pos: play_button.pos
            BoxLayout:
                size_hint: 0.35, None
                size: 40, 40
                # padding: 12, 12
                Button:
                    id: void_button
                    background_normal: ''
                    background_color: 0, 0, 0, 1

        Label:
            id: time
            size_hint_y: 0.25
            text: '0:00:00'
        Label:
            size_hint_y: 0.25
            text: root.name


<MenuPopup@Popup>:
    auto_dismiss: False
    title: 'Menu'
    size_hint: None, None
    size: 180, 200
    pos_hint: {'top': 1}
    BoxLayout:
        orientation: 'vertical'
        Button:
            text: 'Truncate all trackers'
            on_release: app.db.truncate()

        Button:
            text: 'Close me!'
            on_release: root.dismiss()
